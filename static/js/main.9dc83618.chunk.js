(this.webpackJsonptopix=this.webpackJsonptopix||[]).push([[0],[,,,,,function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),s=a.n(c),o=(a(10),a(11),a(1));a(12),a(13);function i(e){var t=e.text,a=e.typeTime,r=e.delay,c=Object(n.useState)(""),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){u("");var e,n=a/t.length,c="";return e=setTimeout((function a(){c=t.substr(0,c.length+1),u(c),c!==t&&(e=setTimeout(a,n))}),n+r),function(){return clearTimeout(e)}}),[t,a,u,r]),i}i.defaultProps={typeTime:1e3,delay:0};var u=i;function l(e){var t=e.setJson,a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],i=c[1],l=Object(n.useState)(!1),d=Object(o.a)(l,2),f=d[0],m=d[1],v=Object(n.useState)(!1),E=Object(o.a)(v,2),h=E[0],p=E[1],g=Object(n.useState)(!1),b=Object(o.a)(g,2),x=b[0],C=b[1],N=Object(n.useRef)(null);Object(n.useEffect)((function(){if(N&&N.current){var e=N.current,a=function(){m(!1),i(!0)},n=function(){i(!1)};function r(e){n();var a=function(e){return e.dataTransfer.files[0]}(e);if(function(e){return"application/json"===e.type||0===e.type.indexOf("text")}(a)){var r=new FileReader;r.onload=function(e){var a=e.target.result;try{var n=JSON.parse(a);!function(e){if(!Array.isArray(e.clusters)||!Array.isArray(e.documents))throw new Error("Json Is Invalid")}(n),p(!0),setTimeout((function(){C(!0),setTimeout((function(){return t(n)}),1e3)}),1500)}catch(r){m(!0)}},r.readAsText(a)}else m(!0)}return e.addEventListener("dragenter",a,!1),e.addEventListener("dragleave",n,!1),e.addEventListener("drop",r,!1),function(){e.removeEventListener("dragenter",a),e.removeEventListener("dragleave",n),e.removeEventListener("drop",r)}}}),[N,m,i,t]);var T=["DragArea"];return s&&T.push("Over"),x&&T.push("Close"),r.a.createElement("div",{className:"DragFile"},r.a.createElement("div",{className:T.join(" "),ref:N},r.a.createElement(u,{text:s?"YES! FEED ME!!! YES!!!":h?"YUM YMU YUM YUM YUM! NOW DIGESTING!!":f?"The Last File You Gave Me Was Bad So I Spat It!":"Drop Your Stupid File Here!"})))}var d=l,f=(a(14),a(15),a(2)),m=(a(18),["#20211d","#50514F","#7f8181","#5D605F","#3b3e3d","#737575","#aaabad","#818587","#585e61","#94999C","#d0d4d7"]),v=function(){var e={},t=0;return e.getColor=function(){var e=m[t];return++t===m.length&&(t=0),e},e},E=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},h=function(e){var t=e.circumference,a=e.outerRadius,n=e.innerRadius;return Math.sin(t/2)*(a+n)/2*2},p=function(e){return e.outerRadius-e.innerRadius},g=function(e){var t=e.dataset,a=e.dataIndex;return t.labels[a]},b=function(e){var t=e.dataset,a=e.dataIndex;return t._meta[0].data[a]._model},x=function(e){var t=[],a=v();return e.clusters.forEach((function(e){return function e(t,a,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t[c]||(t[c]={data:[],clusters:[],backgroundColor:[],labels:[]});var s=t[c];r||(r=a.getColor()),s.data.push(n.number_of_documents),s.clusters.push(n),s.labels.push(n.cluster_name),s.backgroundColor.push(r),n.sub_clusters&&n.sub_clusters.forEach((function(n){e(t,a,n,r,c+1)}))}(t,a,e)})),t.reverse()},C=function(e,t,a){return{type:"pie",data:{datasets:x(e)},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex],n=e.index;return a.labels[n]+": "+a.data[n]}}},onClick:function(e,a){var n=a[0];if(n){var r=n._chart.config.data.datasets[n._datasetIndex].clusters[n._index];t(r)}},plugins:{datalabels:{formatter:function(e,t){return g(t)},color:function(e){var t=e.dataset,a=e.dataIndex,n=E(t.backgroundColor[a]);return.299*n.r+.587*n.g+.114*n.b>140?"black":"white"},textStrokeColor:function(e){var t=e.dataset,a=e.dataIndex,n=E(t.backgroundColor[a]);return.299*n.r+.587*n.g+.114*n.b>140?"white":"black"},display:!0,clip:!0,clamp:!0,offset:0,textStrokeWidth:2,rotation:function(e){var t,a=b(e),n=p(a),r=h(a),c=57.296*((t=a).startAngle+t.endAngle)/2%360;return c>90&&c<270&&(c-=180),r>=n&&(c-=90),c},font:function(e){return{size:function(e){var t=g(e),n=function(e){var t=.7*p(e),a=.7*h(e);return{width:Math.max(t,a),height:Math.min(t,a)}}(b(e));return function(e,t,a){for(var n=a.width,r=a.height,c=0,s=0;s<n&&c<r&&c<40;)c++,e.font="".concat(c,"px Arial"),s=e.measureText(t).width;return c-1}(a,t,n)}(e)}}}}}}};function N(e){var t=e.dataJson,a=e.setSelectedCluster,c=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(c&&c.current){var e=c.current.getContext("2d"),n=new f.Chart(e,C(t,a,e));return function(){return n.destroy()}}}),[c,t,a]),r.a.createElement("div",{className:"ChartContainer"},r.a.createElement("canvas",{className:"ChartCanvas",width:"500",height:"500",ref:c}))}var T=N,y=(a(19),a(20),{dir:"rtl",textAlign:"right"}),O={dir:"ltr",textAlign:"left"},S=function(e){return t=e,new RegExp("^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]").test(t)?y:O;var t};function j(e){var t=e.document,a=t.header,n=t.text,c=t.link;return r.a.createElement("div",{className:"ClusterDocument"},r.a.createElement("div",{className:"ClusterDocumentTitle",style:S(a)},a),r.a.createElement("div",{className:"ClusterDocumentText",style:S(n)},n),r.a.createElement("a",{href:c,className:"ClusterDocumentLink",style:O},c))}var w=j;function I(e){var t=e.cluster,a=e.documents;return r.a.createElement("div",{className:"ClusterContent"},r.a.createElement("div",{className:"ClusterTitle"},t.cluster_name),r.a.createElement("div",{className:"ClusterDocuments"},a.filter((function(e){return t.list_of_documents_ids.includes(e.document_id)})).map((function(e){return r.a.createElement(w,{document:e,key:e.document_id})}))))}var k=I;function A(e){var t=e.dataJson,a=Object(n.useState)(t.clusters[0]),c=Object(o.a)(a,2),s=c[0],i=c[1];return r.a.createElement("div",{className:"Results"},r.a.createElement("div",{className:"PieSection"},r.a.createElement("div",{className:"PieTitle"},r.a.createElement(u,{text:"I Barfed This Pie For You"})),r.a.createElement("div",{className:"PieContainer"},r.a.createElement(T,{dataJson:t,setSelectedCluster:i}))),r.a.createElement("div",{className:"Divider"}),r.a.createElement("div",{className:"ContentSection"},r.a.createElement("div",{className:"ContentTitle"},r.a.createElement(u,{text:"Here Is The Pie Contents",delay:2100}),r.a.createElement("div",{className:"ContentSubTitle"},r.a.createElement(u,{text:"You Know, For Allergies & Such",delay:3200}))),r.a.createElement("div",{className:"ContentContainer"},r.a.createElement(k,{cluster:s,documents:t.documents}))))}var _=A;function D(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"Main"},a?r.a.createElement(_,{dataJson:a}):r.a.createElement(d,{setJson:c}))}var R=D;function M(e){e.preventDefault(),e.stopPropagation()}var Y=function(){var e=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(e&&e.current){var t=e.current;return["dragenter","dragover","dragleave","drop"].forEach((function(e){t.addEventListener(e,M,!1)})),function(){["dragenter","dragover","dragleave","drop"].forEach((function(e){t.removeEventListener(e,M,!1)}))}}}),[e]),r.a.createElement("div",{className:"App",ref:e},r.a.createElement("div",{className:"Header"},r.a.createElement("span",{className:"Title"},r.a.createElement(u,{text:"Topix"}))),r.a.createElement("div",{className:"Body"},r.a.createElement(R,null)),r.a.createElement("div",{className:"Footer"},r.a.createElement(u,{text:"This Site Is Brought To You By The Brain Of Dor Gross, All Rights Reserved To Dor Gross.",delay:2e4,typeTime:3e3})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.9dc83618.chunk.js.map